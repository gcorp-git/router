!function(){"use strict";const t={isInited:!1,allowedOptions:{processLinks:"boolean",getState:"function",onVisit:"function"}},e={processLinks:!0,getState:t=>{},onVisit:({location:t,state:e})=>{}};class n{constructor(t){const e=()=>{throw"incorrect routes format"};t instanceof Array||e(),this.default=void 0;const n=[],o=/^[^\d\W]\w*$/;for(const i of t){i instanceof Array||e(),i.length||e();const t=i[0];"string"!=typeof t&&e();const r=i.length>1?i[1]:void 0;if(""===t){this.default&&e(),this.default=Object.freeze(r);continue}let s=!1,c="";const a=[],f={};for(let n=0,i=t.length;n<i;n++){const r=t[n];if("{"===r){(s||n===i-1)&&e(),s=!0;continue}if(!s){"}"===r&&e(),c+=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");continue}let l="";for(let r=n;r<i;r++){const u=t[r];if(r===i-1&&"}"!==u&&e(),"{"===u&&e(),"}"===u){c+="([^/?#]+)",(l=l.trim())||e(),o.test(l)||e(),f[l]&&e(),a.push(l),f[l]=!0,s=!1,n=r;break}l+=u}}n.push(Object.freeze([Object.freeze(new RegExp("^"+c+"$","g")),Object.freeze(a),Object.freeze(r)]))}return this.list=Object.freeze(n),Object.freeze(this)}}window.Routes=n;function o(t){if(!e.processLinks)return;let n=null;for(const e of t.path)if("A"===e.tagName){n=e;break}if(!n)return;if("ignore"===n.getAttribute("data-router"))return;const o=i(n.getAttribute("href"));o instanceof Object&&(t.preventDefault(),r(o))}function i(t){if(void 0===(t=function(t){0===(t=t.trim()).indexOf("//")&&(t=location.protocol+t),0===t.indexOf(location.origin)&&(t=t.substr(location.origin.length));try{if(new URL(t).origin!==location.origin)return}catch(t){}switch(!0){case 0===t.indexOf("/"):break;case 0===t.indexOf("#"):t=location.pathname+location.search+t;break;case 0===t.indexOf("?"):t=location.pathname+t;break;default:{const e=location.pathname.lastIndexOf("/");t=(-1!==e?location.pathname.substr(0,e)+"/":"")+t}}return t}(t)))return;const n=e.getState(t);if(void 0!==n){if(!(n instanceof Object))throw"getState() returned incorrect result";return{state:n,url:t}}}function r({state:t,url:n}){t instanceof Object||(t={}),window.history.pushState(t,document.title,n),e.onVisit(window.history.state)}window.router=new class{init(n){t.isInited||(t.isInited=!0,this.setOptions(n),document.addEventListener("click",o),window.onpopstate=(t=>e.onVisit(t.state)),this.visit(document.location.href))}setOptions(n){if(n instanceof Object)for(const o in t.allowedOptions)if(void 0!==n[o]){const i=t.allowedOptions[o];if(typeof n[o]!==i)throw"incorrect options format";e[o]=n[o]}}visit(t){if("string"!=typeof t)throw"incorrect URL format";const e=i(t);e instanceof Object&&r(e)}getRoute(t,e){if(!(e instanceof n))throw"incorrect routes format";let o=e.default;for(const n of e.list){let e=[...t.matchAll(n[0])];if(e.length&&e[0].length){e=e[0].slice(1),o={...n[2]};for(let t=0,i=e.length;t<i;t++)o[n[1][t]]=e[t]}}return o}}}();